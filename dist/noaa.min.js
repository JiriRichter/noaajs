((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NOAA={})})(this,function(t){var j=function(t,e){return(j=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(t,s,a,u){return new(a=a||Promise)(function(r,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}o((u=u.apply(t,s||[])).next())})}function a(n,i){var o,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=t(0),c.throw=t(1),c.return=t(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(r){return function(t){var e=[r,t];if(o)throw new TypeError("Generator is already executing.");for(;u=c&&e[c=0]?0:u;)try{if(o=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,s=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))u.label=e[1];else if(6===e[0]&&u.label<a[1])u.label=a[1],a=e;else{if(!(a&&u.label<a[2])){a[2]&&u.ops.pop(),u.trys.pop();continue}u.label=a[2],u.ops.push(e)}}e=i.call(n,u)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function x(t){this.correlationId=t.correlationId,this.detail=t.detail,this.instance=t.instance,this.path=t.path,this.status=t.status,this.title=t.title,this.type=t.type}n.prototype.fetch=function(i){return o(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:return[4,fetch(i,{method:"GET",headers:{Accept:"application/geo+json"}})];case 1:return(e=t.sent()).ok?[3,3]:(n=x.bind,[4,e.json()]);case 2:throw r=new(n.apply(x,[void 0,t.sent()])),new Error(r.detail);case 3:return[4,e.json()];case 4:return[2,t.sent()]}})})},n.prototype.get=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return[2,this.fetch("".concat(n.base_url,"/").concat(e))]})})},n.prototype.getNext=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return[2,this.fetch(e.nextPageUrl)]})})},n.base_url="https://api.weather.gov";var r=n;function n(){}function i(t){var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,n=t.getUTCDate(),i=t.getUTCHours(),t=t.getUTCMinutes();return"".concat(e).concat(r.toString().padStart(2,"0")).concat(n.toString().padStart(2,"0")," ").concat(i.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}function R(e){return e?Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&"):""}function U(t,e){e=R(e);return e?"".concat(t,"?").concat(e):t}function s(t,e){t=t.split("/");return t[t.length+e]}function u(t,e,r){if((r=void 0===r?!1:r)||t in e)return e[t];throw new Error("Invalid property name: "+t)}function c(t,e,r){return u(t,e,r=void 0===r?!1:r)}function h(t,e,r){return u(t,e,r=void 0===r?!1:r)}function G(t){return new Date(Date.parse(t))}function l(t,e){return G(c(t,e))}function Z(t){return t.split(":")[1]}var V,F=function(t){t=u("properties",t),this.id=c("id",t),this.type=c("type",t),this.name=c("name",t,!0),this.state=c("state",t,!0)},K=function(t){for(var t=u("properties",t),e=(this.id=c("id",t),this.areaDescription=c("areaDesc",t),this.geocode=c("geocode",t),this.affectedZones=[],c("affectedZones",t)),r=0;r<e.length;r++)this.affectedZones.push(new F(e[r]));this.references=c("references",t),this.sent=l("sent",t),this.effective=l("effective",t),this.onset=l("onset",t),this.expires=l("expires",t),this.ends=l("ends",t),this.status=c("status",t),this.messageType=c("messageType",t),this.category=c("category",t),this.severity=c("severity",t),this.certainty=c("certainty",t),this.urgency=c("urgency",t),this.event=c("event",t),this.sender=c("sender",t),this.senderName=c("senderName",t),this.headline=c("headline",t),this.description=c("description",t),this.instruction=c("instruction",t),this.response=c("response",t),this.parameters=c("parameters",t)},p=(e(X,V=function(t){this.title=c("title",t),this.updated=l("updated",t),this.nextPageUrl=c("next",u("pagination",t))}),X);function X(t){var e=V.call(this,t)||this,t=u("features",t);return e.data=t.map(function(t){return new K(t)}),e}e(v,d=r),v.prototype.getAll=function(t,e,r,n){return o(this,arguments,void 0,function(e,r,n,i,o){var s;return void 0===o&&(o=500),a(this,function(t){return s=d.prototype.get.call(this,"alerts?".concat(this.getQueryString(e,r,n,i,o))),[2,new p(s)]})})},v.prototype.getActive=function(t,e,r,n){return o(this,arguments,void 0,function(e,r,n,i,o){var s;return void 0===o&&(o=500),a(this,function(t){return s=d.prototype.get.call(this,"alerts/active?".concat(this.getQueryString(e,r,n,i,o))),[2,new p(s)]})})},v.prototype.getNext=function(r){return o(this,void 0,void 0,function(){var e;return a(this,function(t){return e=d.prototype.getNext.call(this,r),[2,new p(e)]})})},v.prototype.getQueryString=function(t,e,r,n,i){var o={};return t&&(o.startTime=t),e&&(o.endTime=t),r&&(o.status=r.join(",")),R(o)};var d,f=v;function v(){return d.call(this)||this}e(g,m=r),g.prototype.getGlossary=function(){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,m.prototype.get.call(this,"glossary")];case 1:return[2,t.sent().glossary.reduce(function(t,e){return t[e.term]=e.definition},{})]}})})};var m,y=g;function g(){return m.call(this)||this}function Y(t){this.type=c("type",t)}e(J,k=Y);var k,w=J;function J(t){var e=k.call(this,t)||this,t=u("coordinates",t);return e.latitude=t[1],e.longitude=t[0],e}var Q,A=function(t){this.value=h("value",t),this.unit=Z(c("unitCode",t))},z=(e(q,Q=w),q);function q(t){var e=Q.call(this,t)||this,t=u("properties",t);return e.elevation=new A(u("elevation",t)),e.id=c("stationIdentifier",t),e.name=c("name",t),e.timeZone=c("timeZone",t),e.forecastZone=s(c("forecast",t,!0),-1),e.county=s(c("county",t,!0),-1),e.fireWeatherZone=s(c("fireWeatherZone",t,!0),-1),e}B.prototype.toArray=function(){if(!this._array){this._array=[];for(var t=0;t<this.totalHours;t++)this._array.push(new Date(this.time.milliseconds+36e5*t))}return this._array};var T=B;function B(t){var e=t.split("/");if(2!==e.length)throw new Error("Invalid valid time value ("+t+")");this.time=G(e[0]),this.hours=0,this.days=0;var r=e[1],n=0;if("P"!==r[0])throw new Error("Invalid valid time period value ("+e[1]+")");for(var i=1;i<r.length;i++)"0"<=r.charAt(i)&&r.charAt(i)<="9"?n=10*n+(r.charCodeAt(i)-"0".charCodeAt(0)):"T"===r.charAt(i)?n=0:"D"===r.charAt(i)?(this.days=n,n=0):"H"===r.charAt(i)&&(this.hours=n,n=0);if(0===this.days&&0===this.hours)throw new Error("Invalid valid time period ("+r+")");this.totalHours=24*this.days+this.hours}var $,tt=function(t,e){this.latitude=t,this.longitude=e},w=(e(et,$=Y),et);function et(t){var e=$.call(this,t)||this,t=u("coordinates",t)[0];return e.path=t.map(function(t){return new tt(t[1],t[0])}),e}e(b,rt=w),b.prototype.getVariable=function(t,e){var r,n,i=u(t,e);if(i.uom&&Z(i.uom),i.values&&0<i.values.length){r=[],i.sourceUnit&&(r.sourceUnit=i.sourceUnit);for(var o=0;o<i.values.length;o++)null!==i.values[o].value&&("number"==typeof i.values[o].value?n=h("value",i.values[o]):(n=i.values[o].value,Array.isArray(n)&&n.forEach(function(t){for(var e in t)t[e]&&t[e].unit&&t[e].value&&(t[e]=new A(t[e]))})),n.validTime=new T(i.values[o].validTime),r.push(n))}return r},b.prototype.mapToValidTimes=function(t){var e,r,n,i={};if(void 0!==this.values[t]&&this.values[t].length){for(r=0;r<this.values[t].length;r++)for(e=this.values[t][r].validTime,n=0;n<e.totalHours;n++)i[e.time.milliseconds+36e5*n]=this.values[t][r];return this.validTimes.toArray().map(function(t){return i[t.milliseconds]})}};var rt,nt=b;function b(t){var e=rt.call(this,t)||this,r=u("properties",t);e.gridX=h("gridX",r),e.gridX=h("gridY",r),e.office=c("gridId",r),e.elevation=new A(u("elevation",r)),e.updateTime=l("updateTime",r),e.validTimes=new T(c("validTimes",r)),e.values={};for(var n=0;n<b.variables.length;n++)e.values[b.variables[n]]=e.getVariable(b.variables[n],r);return e}var M,_,it=function(t){var e,r;this.number=(void 0===e&&(e=!1),parseInt(c("number",t,e))),this.name=c("name",t),this.startTime=l("startTime",t),this.endTime=l("endTime",t),this.isDaytime="true"===c("isDaytime",t,r=void 0===r?!1:r),this.temperature=h("temperature",t),this.temperatureUnit=c("temperatureUnit",t),this.temperatureTrend=c("temperatureTrend",t),this.windSpeed=c("windSpeed",t),this.windDirection=c("windDirection",t),this.icon=c("icon",t),this.shortForecast=c("shortForecast",t),this.detailedForecast=c("detailedForecast",t)},ot=function(t){t=u("properties",t),this.units=c("units",t),this.forecastGenerator=c("forecastGenerator",t),this.generatedAt=l("generatedAt",t),this.updateTime=l("updateTime",t),this.validTimes=new T(c("validTimes",t)),this.elevation=new A(u("elevation",t)),this.periods=u("periods",t).map(function(t){return new it(t)})},w=((w=M=M||{}).metric="si",w.us="us",e(L,_=r),L.prototype.getForecastData=function(r,n,i){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,_.prototype.get.call(this,"gridpoint/".concat(r,"/").concat(n,",").concat(i))];case 1:return e=t.sent(),[2,new nt(e)]}})})},L.prototype.getForecast=function(t,e,r){return o(this,arguments,void 0,function(e,r,n,t){var i;return void 0===t&&(t=M.us),a(this,function(t){switch(t.label){case 0:return[4,_.prototype.get.call(this,"gridpoint/".concat(e,"/").concat(r,",").concat(n,"/forecast"))];case 1:return i=t.sent(),[2,new ot(i)]}})})},L.prototype.getForecastHourly=function(t,e,r){return o(this,arguments,void 0,function(e,r,n,t){var i;return void 0===t&&(t=M.us),a(this,function(t){switch(t.label){case 0:return[4,_.prototype.get.call(this,"gridpoint/".concat(e,"/").concat(r,",").concat(n,"/forecast/hourly"))];case 1:return i=t.sent(),[2,new ot(i)]}})})},L.prototype.getStations=function(e,r,n){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,_.prototype.get.call(this,"gridpoint/".concat(e,"/").concat(r,",").concat(n,"/stations"))];case 1:return[2,u("features",t.sent()).map(function(t){return new z(t)})]}})})},L);function L(){return _.call(this)||this}var I,st=function(t){t=u("properties",t),this.city=c("city",t),this.state=c("state",t),this.distance=new A(u("distance",t)),this.bearing=new A(u("bearing",t))},at=function(t){t=u("properties",t),this.gridX=h("gridX",t),this.gridX=h("gridY",t),this.office=c("gridId",t),this.forecastZone=s(c("forecastZone",t),-1),this.timeZone=c("timeZone",t),this.radarStation=c("radarStation",t),this.relativeLocation=new st(u("relativeLocation",t)),this.county=s(c("county",t,!0),-1),this.fireWeatherZone=s(c("fireWeatherZone",t,!0),-1)},ut=(e(ct,I=r),ct.prototype.getPoint=function(r,n){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,I.prototype.get.call(this,"points/".concat(r,",").concat(n))];case 1:return e=t.sent(),[2,new at(e)]}})})},ct);function ct(){return I.call(this)||this}e(lt,ht=r);var ht,S=lt;function lt(){return ht.call(this)||this}e(dt,pt=r);var pt,D=dt;function dt(){return pt.call(this)||this}e(vt,ft=r),vt.Types={land:"land",marine:"marine",forecast:"forecast",public:"public",coastal:"coastal",offshore:"offshore",fire:"fire",county:"county"};var ft,r=vt;function vt(){return ft.call(this)||this}var N,C,mt,P,E,H,ut={points:new ut,glossary:new y,products:new S,alerts:new f,stations:new D,zones:new r,gridPoint:new w},y=((y=N=N||{}).CRD="CRD",y.IGLD="IGLD",y.LWD="LWD",y.MHHW="MHHW",y.MHW="MHW",y.MTL="MTL",y.MSL="MSL",y.MLW="MLW",y.MLLW="MLLW",y.NAVD="NAVD",y.STND="STND",(S=C=C||{}).water_level="water_level",S.air_temperature="air_temperature",S.water_temperature="water_temperature",S.wind="wind",S.air_pressure="air_pressure",S.air_gap="air_gap",S.conductivity="conductivity",S.visibility="visibility",S.humidity="humidity",S.salinity="salinity",S.hourly_height="hourly_height",S.high_low="high_low",S.daily_mean="daily_mean",S.monthly_mean="monthly_mean",S.one_minute_water_level="one_minute_water_level",S.predictions="predictions",S.datums="datums",S.currents="currents",(f=mt=mt||{}).gmt="gmt",f.lst="lst",f.lst_ldt="lst_ldt",(D=P=P||{}).h="h",D.hilo="hilo",(r=E=E||{}).json="json",r.xml="xml",r.csv="csv",(w=H=H||{}).metric="metric",w.english="english",O.prototype.getLatest=function(){return this.params.date="latest",this.get()},O.prototype.getRecent=function(){return this.params.date="recent",this.get()},O.prototype.getToday=function(){return this.params.date="today",this.get()},O.prototype.getLastHours=function(t){return this.params.range=t,this.get()},O.prototype.getHoursAfter=function(t,e){return this.params.begin_date=i(t),this.params.range=e,this.get()},O.prototype.getHoursBefore=function(t,e){return this.params.end_date=i(t),this.params.range=e,this.get()},O.prototype.getDateRange=function(t,e){return this.params.begin_date=i(t),this.params.end_date=i(e),this.get()},O.prototype.get=function(){var i=this,o=this;return new Promise(function(e,r){var n=new XMLHttpRequest,t=U(O.url,i.params);n.open("GET",t),n.onload=function(){var t;200<=n.status&&n.status<300?(t=JSON.parse(n.response)).error?r(t.error):((t=o.parseResponse(t)).parameters=Object.assign({},o.params),e(t)):r(n)},n.onerror=function(){r(n)},n.send()})},O.prototype.parseResponse=function(t){return t},O.url="https://api.tidesandcurrents.noaa.gov/api/prod/datagetter",O);function O(t,e,r,n,i){if(void 0===r&&(r=void 0),void 0===n&&(n=void 0),void 0===i&&(i="metric"),!(e in C))throw new Error("Invalid data product");if(!(i in H))throw new Error("Invalid units");if(this.params={},this.params.station=t,this.params.product=e,this.params.format=E.json,this.params.units=i,this.params.time_zone=mt.gmt,r){if(!(r in N))throw new Error("Invalid datum value");this.params.datum=r}if(n){if(!(n in P))throw new Error("Invalid interval");this.params.interval=n}}e(wt,yt=y),wt.prototype.parseResponse=function(t){var e=[];return t.datums.forEach(function(t){e.push({name:t.n,value:parseFloat(t.v),unit:"m"})}),e};var yt,gt=wt;function wt(t){return yt.call(this,t,C.datums,void 0,void 0,H.metric)||this}e(bt,At=y),bt.prototype.parseResponse=function(t){var r=[];return t.predictions.forEach(function(t){var e;r.push({time:(e=t.t,new Date(Date.parse(e.replace(" ","T")+":00+00:00"))),value:parseFloat(t.v),type:t.type})}),r};var At,Tt=bt;function bt(t,e){return e=e||N.STND,At.call(this,t,C.predictions,e,P.hilo,H.metric)||this}e(Lt,Mt=y),Lt.prototype.parseResponse=function(t){return t};var Mt,_t=Lt;function Lt(t,e){return Mt.call(this,t,C.wind,void 0,e,H.metric)||this}W.prototype.stations=function(r){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e="stations.json",r&&(e=U(e,{type:r})),[4,this.get(e)];case 1:return[2,t.sent().stations]}})})},W.prototype.station=function(n){return o(this,void 0,void 0,function(){var e,r;return a(this,function(t){switch(t.label){case 0:return e="stations/".concat(n,".json"),[4,this.get(e)];case 1:if(e=t.sent(),(r=e.stations)&&1===r.length)return[2,r[0]];throw new Error("API did not return any data for station id ".concat(n))}})})},W.prototype.get=function(i){return o(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:return n="".concat(W.baseUrl,"/").concat(i),[4,fetch(n)];case 1:if(!1!==(e=t.sent()).ok)return[3,6];r=null,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e.json()];case 3:return"errorMsg"in(n=t.sent())&&(r=n.errorMsg),[3,5];case 4:return t.sent(),[3,5];case 5:throw new Error(null!=r?r:"API responded with status ".concat(e.status," (").concat(e.statusText,")"));case 6:return[4,e.json()];case 7:return[2,t.sent()]}})})},W.baseUrl="https://api.tidesandcurrents.noaa.gov/mdapi/prod/webapi";var It,S=W;function W(){}(f=It=It||{}).waterlevels="waterlevels",f.historicwl="historicwl",f.met="met",f.waterlevelsandmet="waterlevelsandmet",f.tidepredictions="tidepredictions",f.harcon="harcon",f.datums="datums",f.supersededdatums="supersededdatums",f.benchmarks="benchmarks",f.supersededbenchmarks="supersededbenchmarks",f.currents="currents",f.historiccurrents="historiccurrents",f.surveycurrents="surveycurrents",f.currentpredictions="currentpredictions",f.cond="cond",f.watertemp="watertemp",f.physocean="physocean",f.tcoon="tcoon",f.oneminute="1minute",f.airgap="airgap",f.visibility="visibility",f.highwater="highwater",f.lowwater="lowwater";D={Format:E,Datum:N,DataProduct:C,Units:H,Interval:P,StationType:It,data:{predictions:function(t,e){return new Tt(t,e)},datums:function(t){return new gt(t)},wind:function(t,e){return new _t(t,e)}},metadata:new S};t.MarineAreaCodes={PZ:"PZ",PK:"PK",PH:"PH",PS:"PS",PM:"PM",AN:"AN",AM:"AM",GM:"GM",LS:"LS",LM:"LM",LH:"LH",LC:"LC",LE:"LE",LO:"LO"},t.RegionCodes={AL:"AL",AT:"AT",GL:"GL",GM:"GM",PA:"PA",PI:"PI"},t.StateAreaCodes={AL:"AL",AK:"AK",AS:"AS",AR:"AR",AZ:"AZ",CA:"CA",CO:"CO",CT:"CT",DE:"DE",DC:"DC",FL:"FL",GA:"GA",GU:"GU",HI:"HI",ID:"ID",IL:"IL",IN:"IN",IA:"IA",KS:"KS",KY:"KY",LA:"LA",ME:"ME",MD:"MD",MA:"MA",MI:"MI",MN:"MN",MS:"MS",MO:"MO",MT:"MT",NE:"NE",NV:"NV",NH:"NH",NJ:"NJ",NM:"NM",NY:"NY",NC:"NC",ND:"ND",OH:"OH",OK:"OK",OR:"OR",PA:"PA",PR:"PR",RI:"RI",SC:"SC",SD:"SD",TN:"TN",TX:"TX",UT:"UT",VT:"VT",VI:"VI",VA:"VA",WA:"WA",WV:"WV",WI:"WI",WY:"WY"},t.TidesAndCurrents=D,t.Weather=ut});