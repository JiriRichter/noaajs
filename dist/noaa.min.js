((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NOAA={})})(this,function(t){F.prototype.toString=function(){return this.toDate().toISOString()},F.prototype.toDate=function(){return new Date(this.milliseconds)};var W=F;function F(t){if(t instanceof Date)this.milliseconds=t.getTime();else if("string"==typeof t)this.milliseconds=Date.parse(t);else{if("number"!=typeof t)throw new Error("Invalid time argument ("+t+")");this.milliseconds=t}}function o(t){return null==t?t:new W(t)}V.prototype.toString=function(){return"".concat(this.x,",").concat(this.y)};var H=V;function V(t,e){if(t=parseInt(t),e=parseInt(e),isNaN(t)||isNaN(e))throw new Error("Invalid x, y values: ("+t+", "+e+")");this.x=+t,this.y=+e}function j(t,e){return t instanceof H?t:Array.isArray(t)&&"object"!=typeof t[0]?2===t.length?new H(t[0],t[1]):null:null==t?t:"object"==typeof t&&"x"in t?new H(t.x,t.y):void 0===e?null:new H(t,e)}var s={AL:"AL",AK:"AK",AS:"AS",AR:"AR",AZ:"AZ",CA:"CA",CO:"CO",CT:"CT",DE:"DE",DC:"DC",FL:"FL",GA:"GA",GU:"GU",HI:"HI",ID:"ID",IL:"IL",IN:"IN",IA:"IA",KS:"KS",KY:"KY",LA:"LA",ME:"ME",MD:"MD",MA:"MA",MI:"MI",MN:"MN",MS:"MS",MO:"MO",MT:"MT",NE:"NE",NV:"NV",NH:"NH",NJ:"NJ",NM:"NM",NY:"NY",NC:"NC",ND:"ND",OH:"OH",OK:"OK",OR:"OR",PA:"PA",PR:"PR",RI:"RI",SC:"SC",SD:"SD",TN:"TN",TX:"TX",UT:"UT",VT:"VT",VI:"VI",VA:"VA",WA:"WA",WV:"WV",WI:"WI",WY:"WY"},a={PZ:"PZ",PK:"PK",PH:"PH",PS:"PS",PM:"PM",AN:"AN",AM:"AM",GM:"GM",LS:"LS",LM:"LM",LH:"LH",LC:"LC",LE:"LE",LO:"LO"},U={AL:"AL",AT:"AT",GL:"GL",GM:"GM",PA:"PA",PI:"PI"},G=function(t,e){return(G=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function u(t,s,a,u){return new(a=a||Promise)(function(r,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}o((u=u.apply(t,s||[])).next())})}function c(n,i){var o,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=t(0),c.throw=t(1),c.return=t(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(r){return function(t){var e=[r,t];if(o)throw new TypeError("Generator is already executing.");for(;u=c&&e[c=0]?0:u;)try{if(o=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,s=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))u.label=e[1];else if(6===e[0]&&u.label<a[1])u.label=a[1],a=e;else{if(!(a&&u.label<a[2])){a[2]&&u.ops.pop(),u.trys.pop();continue}u.label=a[2],u.ops.push(e)}}e=i.call(n,u)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function R(t){this.correlationId=t.correlationId,this.detail=t.detail,this.instance=t.instance,this.path=t.path,this.status=t.status,this.title=t.title,this.type=t.type}k.prototype.get=function(n,i){return u(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return"object"==typeof n&&(n=this.constructUrl(n,i)),[4,fetch(n,{method:"GET",headers:{Accept:"application/geo+json"}})];case 1:return(e=t.sent()).ok?[3,3]:(r=R.bind,[4,e.json()]);case 2:return[2,new(r.apply(R,[void 0,t.sent()]))];case 3:return[4,e.json()];case 4:return[2,t.sent()]}})})},k.prototype.constructUrl=function(t,e){var r,n,i=k.url;return"/"!==this.path[0]&&(i+="/"),i+=this.path,t&&Array.isArray(t)&&(r="/"===i.slice(-1),t.forEach(function(t){i+=(r?"":"/")+encodeURIComponent(t.toString()),r=!1})),e&&e instanceof Object&&(n=!0,i+="?",Object.keys(e).forEach(function(t){i+=(n?"":"&")+t+"="+encodeURIComponent(e[t]),n=!1})),i},k.url="https://api.weather.gov";var r=k;function k(t){this.path=t}function q(t,e){return{lat:t,lon:e}}K.prototype.getPolygonRings=function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.convertCoordinates(t[r]));return e},K.prototype.convertCoordinates=function(t){for(var e=[],r=0;r<t.length;r++)e.push(q(t[r][1],t[r][0]));return e};var Y=K;function K(t){switch(this.type=t.type,t.type){case"Point":this.latlon=q(t.coordinates[1],t.coordinates[0]);break;case"Polygon":this.rings=this.getPolygonRings(t.coordinates);break;case"MultiPolygon":this.polygons=[];for(var e=0;e<t.coordinates.length;e++)this.polygons.push(this.getPolygonRings(t.coordinates[e]));break;default:throw new Error("Invalid geometry - ("+t.type+") is not valid geometry")}}function z(t){return new Y(t)}function n(t){if(void 0!==t){if(void 0===t.type||"Feature"!==t.type)throw new Error('Invalid data - Type property is missing or not "Feature"');if(!t.geometry||!t.geometry.type)throw new Error("Invalid geometry data");if("GeometryCollection"===t.geometry.type){this.geometries=[];for(var e=0;e<t.geometry.geometries.length;e++)this.geometries.push(z(t.geometry.geometries[e]))}else this.geometry=z(t.geometry)}}function l(t,e){return t?(t=t.split("/"),e<0?t[t.length+e]:t[e]):null}function i(t,e,r){if((r=void 0===r?!1:r)||t in e)return e[t];throw new Error("Invalid property name: "+t)}function p(t,e,r){return i(t,e.properties,r=void 0===r?!1:r)}J.prototype.getProductText=function(){return $().getProduct(this.id)};var X=J;function J(t){this.id=i("id",t),this.wmoCollectiveId=i("wmoCollectiveId",t),this.issuingOffice=i("issuingOffice",t),this.issuanceTime=o(i("issuanceTime",t)),this.productCode=i("productCode",t),this.productName=i("productName",t),this.productText=i("productText",t,!0)}function h(t,e,r){if(Array.isArray(e)){if(!r.allowArray)throw new Error(t+" parameter does not allow array of values");for(var n=0;n<e.length;n++)h(t,e[n],r)}else{if(r.type)if("Date"===r.type){if(!(e instanceof Date))throw new Error("Invalid "+t+" parameter type. Expected "+r.type+", value: "+e)}else if("LatLon"===r.type){if(!("lat"in e&&"lon"in e))throw new Error("Invalid "+t+" parameter type. Expected "+r.type+", value: "+e)}else if(typeof e!==r.type)throw new Error("Invalid "+t+" parameter type. Expected "+r.type+", value: "+e);if(void 0!==r.allowedValues&&!(e in r.allowedValues))throw new Error("Invalid "+t+" parameter value does not match any allowed value; value: "+e)}}function d(t){var e,r,n,i,o;return t instanceof Date?(r=(e=t).getUTCFullYear(),n=e.getUTCMonth()+1,i=e.getUTCDate(),o=e.getUTCHours(),e=e.getUTCMinutes(),"".concat(r).concat(n.toString().padStart(2,"0")).concat(i.toString().padStart(2,"0")," ").concat(o.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"))):Array.isArray(t)?t.join(","):t.toString()}function B(e,r){var n,i={};return Object.keys(e).forEach(function(t){if(!(t in r))throw new Error("Invalid parameter ("+t+")");if(r[t].exclusive){if(void 0!==n)throw new Error(t+" parameter cannot be used together with "+n+" parameter");n=t}"LatLon"===r[t].type&&(e[t]=e[t]),h(t,e[t],r[t]),r[t].query?i[r[t].query]=d(e[t]):i[t]=d(e[t])}),i}e(y,f=r),y.prototype.get=function(n){return u(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return e={},Object.keys(y.parameters).forEach(function(t){t in n&&(h(t,n[t],y.parameters[t]),e[t]=d(n[t]))}),[4,f.prototype.get.call(this,e)];case 1:return r=t.sent(),[2,y.toProductList(r["@graph"])]}})})},y.prototype.getProduct=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,f.prototype.get.call(this,[r])];case 1:return e=t.sent(),[2,new X(e)]}})})},y.prototype.getTypes=function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,f.prototype.get.call(this,["types"])];case 1:return e=t.sent(),[2,y.toProductDictionary(e)]}})})},y.prototype.getLocationTypes=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:if(r)return[4,f.prototype.get.call(this,["locations",r,"types"])];throw new Error("Missing required locationId parameter");case 1:return e=t.sent(),[2,y.toProductDictionary(e)]}})})},y.prototype.getLocations=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,f.prototype.get.call(this,["locations"])];case 1:return[2,t.sent().locations]}})})},y.prototype.getTypeLocations=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:if(e)return[4,f.prototype.get.call(this,["types",e,"locations"])];throw new Error("Missing required typeId parameter");case 1:return[2,t.sent().locations]}})})},y.prototype.getTypeProducts=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:if(r)return[4,f.prototype.get.call(this,["types",r])];throw new Error("Missing required typeId parameter");case 1:return e=t.sent(),[2,y.toProductList(e["@graph"])]}})})},y.prototype.getTypeAndLocationProducts=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:if(!r)throw new Error("Missing required typeId parameter");if(n)return[4,f.prototype.get.call(this,["types",r,"locations",n])];throw new Error("Missing required locationId parameter");case 1:return e=t.sent(),[2,y.toProductList(e["@graph"])]}})})},y.parameters={location:{type:"string",allowArray:!0},start:{type:"Date",allowArray:!1},end:{type:"Date",allowArray:!1},office:{type:"string",allowArray:!0},wmoid:{type:"string",allowArray:!0},type:{type:"string",allowArray:!0},limit:{type:"number",allowArray:!0}},y.toProductList=function(t){var e=[];return t.forEach(function(t){e.push(new X(t))}),e.sort(function(t,e){return t.issuanceTime.milliseconds==e.issuanceTime.milliseconds?0:t.issuanceTime.milliseconds>e.issuanceTime.milliseconds?1:-t}),e},y.toProductDictionary=function(t){var e={};return t["@graph"].forEach(function(t){e[t.productCode]=t.productName}),e};var f,Q=y;function y(){return f.call(this,"/products")||this}function $(){return new Q}function tt(t,r){var n=[];return t.features.forEach(function(t,e){n.push(r(t,e))}),n}et.parseUnit=function(t){return t.split(":")[1]};var v=et;function et(t,e){if("number"!=typeof t)throw new Error("Value must be a number");this.value=t,this.unit=e}function g(t,e){if("object"==typeof t){if("value"in t&&"unitCode"in t)return new v(t.value,v.parseUnit(t.unitCode));if("value"in t&&"unit"in t)return new v(t.value,v.parseUnit(t.unit))}return new v(t,e)}e(it,rt=n);var rt,nt=it;function it(e){var t=rt.call(this,e)||this,r=(t.elevation=g(p("elevation",e)),t.stationId=l(p("station",e,!0),-1),t.timestamp=o(p("timestamp",e)),t.rawMessage=p("rawMessage",e),t.textDescription=p("textDescription",e),t.iconUrl=p("icon",e),t.presentWeather=p("presentWeather",e),t.values={},[]),n=(Object.keys(e.properties).forEach(function(t){e.properties[t]&&e.properties[t].value&&e.properties[t].unitCode&&(r[t]=g(e.properties[t]))}),t.values=r,e.properties.cloudLayers);if(n){t.cloudLayers=[];for(var i=0;i<n.length;i++)t.cloudLayers.push({base:n.value&&n.unitCode?g(n.base):null,amount:n.amount})}return t}function ot(t){return tt(t,function(t){return new nt(t)})}e(w,m=r),w.prototype.getStations=function(r,n,i){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e={},r&&(h("id",r,{type:"string",allowArray:!0}),e.id=d(r)),n&&(h("state",n,{type:"string",allowArray:!0,allowedValues:Object.assign({},s,a)}),e.state=d(n)),null!=i&&(e.limit=i),[4,m.prototype.get.call(this,e)];case 1:return[2,lt(t.sent())]}})})},w.prototype.getAreaStations=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e={},h("area",r,{type:"string",allowArray:!0,allowedValues:Object.assign({},s,a)}),e.state=d(r),null!=n&&(e.limit=n),[4,m.prototype.get.call(this,e)];case 1:return[2,lt(t.sent())]}})})},w.prototype.getRadarStations=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=["radar"],void 0!==r&&e.push(r),[4,m.prototype.get.call(this,e)];case 1:return[2,t.sent()]}})})},w.prototype.getStation=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,m.prototype.get.call(this,[r])];case 1:return e=t.sent(),[2,new ct(e)]}})})},w.prototype.getObservations=function(t){return u(this,arguments,void 0,function(e,r,n,i){var o;return void 0===r&&(r=void 0),void 0===n&&(n=void 0),void 0===i&&(i=void 0),c(this,function(t){switch(t.label){case 0:return o={},h("id",e,{type:"string"}),r&&(h("start",r,{type:"Date"}),o.start=d(r)),n&&(h("end",n,{type:"Date"}),o.end=d(n)),null!=i&&(o.limit=i),[4,m.prototype.get.call(this,[e,"observations"],o)];case 1:return[2,ot(t.sent()).sort(function(t,e){return t.timestamp.milliseconds==e.timestamp.milliseconds?0:t.timestamp.milliseconds>e.timestamp.milliseconds?1:-1})]}})})},w.prototype.getLatestObservations=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return h("id",r,{type:"string"}),[4,m.prototype.get.call(this,[r,"observations","latest"])];case 1:return e=t.sent(),[2,new nt(e)]}})})},w.prototype.getObservationsAtTime=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return h("id",r,{type:"string"}),h("time",r,{type:"Date"}),[4,m.prototype.get.call(this,[r,"observations",n.toISOString()])];case 1:return e=t.sent(),[2,new nt(e)]}})})};var m,st=w;function w(){return m.call(this,"/stations")||this}function at(){return new st}e(b,ut=n),b.prototype.get=function(){return at().getStation(this.id)},b.prototype.getObservations=function(t,e){return at().getObservations(this.id,t,e)},b.prototype.getLatestObservations=function(){return at().getLatestObservations(this.id)},b.prototype.getObservationsAtTime=function(t){return at().getObservationsAtTime(this.id,t)};var ut,ct=b;function b(t){var e=this;return"string"==typeof t?(e=ut.call(this,void 0)||this).id=t:((e=ut.call(this,t)||this).elevation=g(p("elevation",t)),e.id=p("stationIdentifier",t),e.name=p("name",t),e.timeZone=p("timeZone",t),e.forecastZone=l(p("forecast",t,!0),-1),e.county=l(p("county",t,!0),-1),e.fireWeatherZone=l(p("fireWeatherZone",t,!0),-1)),e}function lt(t){return tt(t,function(t){return new ct(t)})}var A,pt=function(t){this.number=parseInt(i("number",t)),this.name=i("name",t),this.detailedForecast=i("detailedForecast",t)},ht=function(t){if(this.updated=o(i("updated",t)),this.periods=[],t.periods)for(var e=0;e<t.periods.length;e++)this.periods.push(new pt(t.periods[e]))},dt=(e(T,A=r),T.prototype.get=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=r?B(r,T.parameterOptions):{},n&&(h("includeGeometry",n,{type:"boolean",allowArray:!1}),e.include_geometry=n),[4,A.prototype.get.call(this,e)];case 1:return[2,gt(t.sent())]}})})},T.prototype.getTypeZones=function(r,n,i){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:if(n){if(e=B(n,T.parameterOptions),n.type)throw new Error("type parameter is not allowed for this call")}else e={};return h("type",r,{type:"string",allowedValues:T.Types}),i&&(h("includeGeometry",i,{type:"boolean",allowArray:!1}),e.include_geometry=i),[4,A.prototype.get.call(this,[r],e)];case 1:return[2,gt(t.sent())]}})})},T.prototype.getZone=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return h("id",r,{type:"string"}),h("type",r,{type:"string",allowedValues:T.Types}),[4,A.prototype.get.call(this,[r,n])];case 1:return e=t.sent(),[2,new yt(e)]}})})},T.prototype.getZoneForecast=function(r,n){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return h("id",r,{type:"string"}),h("type",r,{type:"string",allowedValues:T.Types}),[4,A.prototype.get.call(this,[r,n,"forecast"])];case 1:return e=t.sent(),[2,new ht(e)]}})})},T.prototype.getZoneObservations=function(e,r,n,i){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return h("id",e,{type:"string"}),r&&(h("start",r,{type:"Date"}),d(r)),n&&(h("end",n,{type:"Date"}),d(n)),i&&(h("limit",i,{type:"number"}),0),[4,A.prototype.get.call(this,["forecast",e,"observations"])];case 1:return[2,ot(t.sent())]}})})},T.prototype.getZoneStations=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return h("id",e,{type:"string"}),[4,A.prototype.get.call(this,["forecast",e,"stations"])];case 1:return[2,lt(t.sent())]}})})},T.Types={land:"land",marine:"marine",forecast:"forecast",public:"public",coastal:"coastal",offshore:"offshore",fire:"fire",county:"county"},T.parameterOptions={id:{type:"string",allowArray:!0},area:{type:"string",allowArray:!0,allowedValues:Object.assign({},s,a)},region:{type:"string",allowArray:!0,allowedValues:U},type:{type:"string",allowArray:!0,allowedValues:T.Types},point:{type:"LatLon",allowArray:!1},effective:{type:"Date",allowArray:!1}},T);function T(){return A.call(this,"/zones")||this}function ft(){return new dt}vt.prototype.getZone=function(){return ft().getZone(this.type,this.id)},vt.prototype.getZoneForecast=function(){return ft().getZoneForecast(this.type,this.id)},vt.prototype.getZoneStations=function(){return ft().getZoneStations(this.id)},vt.prototype.getZoneObservations=function(t,e,r){return ft().getZoneObservations(this.id,t,e,r)};var yt=vt;function vt(t){if("string"==typeof t)this.type=l(t,-2),this.id=l(t,-1);else{var e=void 0;for(this.id=p("id",t),this.type=p("type",t),this.name=p("name",t,!0),this.state=p("state",t,!0),t.geometry&&(this.geometry=z(t.geometry)),this.forecastOffices=[],e=0;t.properties.forecastOffices&&e<t.properties.forecastOffices.length;e++)this.forecastOffices.push(l(t.properties.forecastOffices[e],-1));for(this.timeZones=[],e=0;t.properties.timeZone&&e<t.properties.timeZone.length;e++)this.timeZones.push(t.properties.timeZone[e])}}function gt(t){return tt(t,function(t){return new yt(t)})}O.prototype.getZones=function(t,e){var r=[];if(e[t])for(var n=0;n<e[t].length;n++)r.push(new yt(e[t][n]));return r},O.prototype.getStations=function(t,e){var r=[];if(e[t])for(var n=0;n<e[t].length;n++)r.push(new ct(l(e[t][n],-1)));return r},O.prototype.getAreaForecastDiscussion=function(){return $().get({location:this.id,type:"AFD"})},O.prototype.getProductTypes=function(){return $().getLocationTypes(this.id)},O.prototype.getProducts=function(t){return t.location=this.id,$().get(t)};var mt=O;function O(t){"string"==typeof t?this.id=t:(this.id=i("id",t),this.name=i("name",t),this.address=i("address",t),this.telephone=i("telephone",t),this.fax=i("faxNumber",t),this.email=i("email",t),this.url=i("sameAs",t),this.nwsRegion=i("nwsRegion",t),this.parentOrganization=l(i("parentOrganization",t),-1),this.responsibleCounties=this.getZones("responsibleCounties",t),this.responsibleForecastZones=this.getZones("responsibleForecastZones",t),this.responsibleFireZones=this.getZones("responsibleFireZones",t),this.approvedObservationStations=this.getStations("approvedObservationStations",t))}e(At,wt=n);var wt,bt=At;function At(t){var e=wt.call(this,t)||this;return e.city=p("city",t),e.state=p("state",t),e.distance=g(p("distance",t)),e.bearing=g(p("bearing",t)),e}Ot.prototype.toArray=function(){if(!this._array){this._array=[];for(var t=0;t<this.totalHours;t++)this._array.push(o(this.time.milliseconds+36e5*t))}return this._array};var Tt=Ot;function Ot(t){var e=t.split("/");if(2!==e.length)throw new Error("Invalid valid time value ("+t+")");this.time=o(e[0]),this.hours=0,this.days=0;var r=e[1],n=0;if("P"!==r[0])throw new Error("Invalid valid time period value ("+e[1]+")");for(var i=1;i<r.length;i++)"0"<=r.charAt(i)&&r.charAt(i)<="9"?n=10*n+(r.charCodeAt(i)-"0".charCodeAt(0)):"T"===r.charAt(i)?n=0:"D"===r.charAt(i)?(this.days=n,n=0):"H"===r.charAt(i)&&(this.hours=n,n=0);if(0===this.days&&0===this.hours)throw new Error("Invalid valid time period ("+r+")");this.totalHours=24*this.days+this.hours}function St(t){return new Tt(t)}e(S,It=n),S.prototype.getVariable=function(t,e){var r,n,i,o=p(t,e);if(o.uom&&(r=v.parseUnit(o.uom)),o.values&&0<o.values.length){n=[],o.sourceUnit&&(n.sourceUnit=o.sourceUnit);for(var s=0;s<o.values.length;s++)null!==o.values[s].value&&("number"==typeof o.values[s].value?i=g(o.values[s].value,r):(i=o.values[s].value,Array.isArray(i)&&i.forEach(function(t){for(var e in t)t[e]&&t[e].unit&&t[e].value&&(t[e]=g(t[e]))})),i.validTime=St(o.values[s].validTime),n.push(i))}return n},S.prototype.mapToValidTimes=function(t){var e,r,n,i={};if(void 0!==this.values[t]&&this.values[t].length){for(r=0;r<this.values[t].length;r++)for(e=this.values[t][r].validTime,n=0;n<e.totalHours;n++)i[e.time.milliseconds+36e5*n]=this.values[t][r];return this.validTimes.toArray().map(function(t){return i[t.milliseconds]})}};var It,xt=S;function S(t){var e=It.call(this,t)||this;e.xy=j(p("gridX",t),p("gridY",t)),e.office=new mt(p("gridId",t)),e.elevation=g(p("elevation",t)),e.updateTime=o(p("updateTime",t)),e.validTimes=St(p("validTimes",t)),e.values={};for(var r=0;r<S.variables.length;r++)e.values[S.variables[r]]=e.getVariable(S.variables[r],t);return e}xt.variables=["temperature","dewpoint","maxTemperature","minTemperature","relativeHumidity","apparentTemperature","heatIndex","windChill","skyCover","windDirection","windSpeed","windGust","probabilityOfPrecipitation","quantitativePrecipitation","iceAccumulation","snowfallAmount","snowLevel","ceilingHeight","visibility","transportWindSpeed","transportWindDirection","mixingHeight","hainesIndex","lightningActivityLevel","twentyFootWindSpeed","twentyFootWindDirection","waveHeight","wavePeriod","waveDirection","primarySwellHeight","primarySwellDirection","secondarySwellHeight","secondarySwellDirection","wavePeriod2","windWaveHeight","dispersionIndex","pressure","probabilityOfTropicalStormWinds","probabilityOfHurricaneWinds","potentialOf15mphWinds","potentialOf25mphWinds","potentialOf35mphWinds","potentialOf45mphWinds","potentialOf20mphWindGusts","potentialOf30mphWindGusts","potentialOf40mphWindGusts","potentialOf50mphWindGusts","potentialOf60mphWindGusts","grasslandFireDangerIndex","probabilityOfThunder","davisStabilityIndex","atmosphericDispersionIndex","lowVisibilityOccurrenceRiskIndex","stability","redFlagThreatIndex","weather","hazards"];var Lt,Dt=function(t){this.number=parseInt(i("number",t)),this.name=i("name",t),this.startTime=o(i("startTime",t)),this.endTime=o(i("endTime",t)),this.isDaytime=i("isDaytime",t),this.temperature=g(i("temperature",t),i("temperatureUnit",t)),this.temperatureTrend=i("temperatureTrend",t),this.windSpeed=i("windSpeed",t),this.windDirection=i("windDirection",t),this.icon=i("icon",t),this.shortForecast=i("shortForecast",t),this.detailedForecast=i("detailedForecast",t)},Et=(e(Mt,Lt=n),Mt);function Mt(t){var e=Lt.call(this,t)||this;e.units=p("units",t),e.forecastGenerator=p("forecastGenerator",t),e.generatedAt=o(p("generatedAt",t)),e.updateTime=o(p("updateTime",t)),e.validTimes=St(p("validTimes",t)),e.elevation=g(p("elevation",t)),e.periods=[];for(var r=0;r<p("periods",t).length;r++)e.periods.push(new Dt(p("periods",t)[r]));return e}e(x,I=r),x.prototype.get=function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,I.prototype.get.call(this,[this.weatherForecastOffice,this.xy])];case 1:return e=t.sent(),[2,new xt(e)]}})})},x.prototype.getForecast=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return void 0===r&&(r="us"),[4,I.prototype.get.call(this,[this.weatherForecastOffice,this.xy,"forecast"],{units:r})];case 1:return e=t.sent(),[2,new Et(e)]}})})},x.prototype.getForecastHourly=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return void 0===r&&(r="us"),[4,I.prototype.get.call(this,[this.weatherForecastOffice,this.xy,"forecast","hourly"],{units:r})];case 1:return e=t.sent(),[2,new Et(e)]}})})},x.prototype.getStations=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,I.prototype.get.call(this,[this.weatherForecastOffice,this.xy,"stations"])];case 1:return[2,lt(t.sent())]}})})};var I,Pt=x;function x(t,e){var r=I.call(this,"/gridpoints")||this;return r.weatherForecastOffice=t,r.xy=e,r}function Ct(t,e,r){return new Pt(t,j(e,r))}var _t=function(t){this.id=p("id",t),this.areaDescription=p("areaDesc",t),this.geocode=p("geocode",t),this.affectedZones=[];for(var e=p("affectedZones",t),r=0;r<e.length;r++)this.affectedZones.push(new yt(e[r]));this.references=p("references",t),this.sent=o(p("sent",t)),this.effective=o(p("effective",t)),this.onset=o(p("onset",t)),this.expires=o(p("expires",t)),this.ends=o(p("ends",t)),this.status=p("status",t),this.messageType=p("messageType",t),this.category=p("category",t),this.severity=p("severity",t),this.certainty=p("certainty",t),this.urgency=p("urgency",t),this.event=p("event",t),this.sender=p("sender",t),this.senderName=p("senderName",t),this.headline=p("headline",t),this.description=p("description",t),this.instruction=p("instruction",t),this.response=p("response",t),this.parameters=p("parameters",t)},L=(Zt.prototype.getNext=function(){return Wt().getNext(this.next)},Zt);function Zt(t){if(this.title=t.title,this.updated=o(t.updated),this.alerts=[],t.features)for(var e=0;e<t.features.length;e++)this.alerts.push(new _t(t.features[e]));t.pagination?(this.next=t.pagination.next,this.isComplete=!1):this.isComplete=!0}e(E,D=r),E.prototype.get=function(){return u(this,arguments,void 0,function(e){var r;return void 0===e&&(e={}),c(this,function(t){return r=D.prototype.get.call(this,B(e,E.parameterOptions)),[2,new L(r)]})})},E.prototype.getNext=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){return e=D.prototype.get.call(this,r),[2,new L(e)]})})},E.prototype.getActive=function(){return u(this,arguments,void 0,function(e){var r;return void 0===e&&(e={}),c(this,function(t){return r=D.prototype.get.call(this,["active"],B(e,E.parameterOptions)),[2,new L(r)]})})},E.prototype.getTypes=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,D.prototype.get.call(this,["types"]).eventTypes]})})},E.prototype.getAlert=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){return e=D.prototype.get.call(this,[r]),[2,new _t(e)]})})},E.prototype.getActiveCount=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,D.prototype.get.call(this,["active","count"])]})})},E.prototype.getZoneActive=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){return e=D.prototype.get.call(this,["active","zone",r]),[2,new L(e)]})})},E.prototype.getAreaActive=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){if(r in a||r in s)return e=D.prototype.get.call(this,["active","area",r]),[2,new L(e)];throw new Error("Invalid area code ("+r+")")})})},E.prototype.getRegionActive=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){if(r in U)return e=D.prototype.get.call(this,["active","region",r]),[2,new L(e)];throw new Error("Invalid region code ("+r+")")})})},E.Status={actual:"actual",exercise:"exercise",system:"system",test:"test",draft:"draft"},E.MessageType={alert:"alert",update:"update",cancel:"cancel"},E.RegionType={land:"land",marine:"marine"},E.Urgency={unknown:"unknown",past:"past",future:"future",expected:"expected",immediate:"immediate"},E.Severity={unknown:"unknown",minor:"minor",moderate:"moderate",severe:"severe",extreme:"extreme"},E.Certainty={unknown:"unknown",unlikely:"unlikely",possible:"possible",likely:"likely",observed:"observed"},E.parameterOptions={active:{query:"active",type:"boolean"},start:{query:"start"},end:{query:"end"},status:{query:"status",allowArray:!0,type:"string",allowedValues:E.Status},messageType:{query:"message_type",allowArray:!0,type:"string"},event:{query:"event",allowArray:!0,type:"string",allowedValues:E.MessageType},code:{query:"code",allowArray:!0,type:"string"},regionType:{query:"region_type",allowArray:!1,type:"string",exclusive:!0,allowedValues:E.RegionType},point:{type:"LatLon",query:"point",exclusive:!0},region:{query:"region",allowArray:!0,type:"string",exclusive:!0,allowedValues:U},area:{query:"area",allowArray:!0,type:"string",exclusive:!0,allowedValues:Object.assign({},s,a)},zone:{query:"zone",allowArray:!0,type:"string",exclusive:!0},urgency:{query:"urgency",allowArray:!0,type:"string",allowedValues:E.Urgency},severity:{query:"severity",allowArray:!0,type:"string",allowedValues:E.Severity},certainty:{query:"certainty",allowArray:!0,type:"string",allowedValues:E.Certainty},limit:{query:"limit",type:"number"},cursor:{query:"cursor",type:"string"}};var D,Nt=E;function E(){return D.call(this,"/alerts")||this}function Wt(){return new Nt}e(M,Ft=n),M.prototype.getAlerts=function(){return u(this,arguments,void 0,function(e){return void 0===e&&(e={}),c(this,function(t){switch(t.label){case 0:return e.point=this.geometry.latlon,[4,Wt().get(e)];case 1:return[2,t.sent()]}})})},M.prototype.getGridPoint=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Ct(this.office.id,this.xy).get()];case 1:return[2,t.sent()]}})})},M.prototype.getGridPointForecast=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Ct(this.office.id,this.xy).getForecast()];case 1:return[2,t.sent()]}})})},M.prototype.getGridPointForecastHourly=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Ct(this.office.id,this.xy).getForecastHourly()];case 1:return[2,t.sent()]}})})},M.prototype.getGridPointStations=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Ct(this.office.id,this.xy).getStations()];case 1:return[2,t.sent()]}})})};var Ft,Ht=M;function M(t){var e,r=Ft.call(this,t)||this;return r.xy=j(p("gridX",t),p("gridY",t)),r.office=new mt(p("cwa",t)),r.forecastZone=l(p("forecastZone",t),-1),r.timeZone=p("timeZone",t),r.radarStation=p("radarStation",t),r.relativeLocation=(e=p("relativeLocation",t))?new bt(e):null,r.county=l(p("county",t,!0),-1),r.fireWeatherZone=l(p("fireWeatherZone",t,!0),-1),r}e(Ut,Vt=r),Ut.prototype.get=function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,Vt.prototype.get.call(this,[this.latlon])];case 1:return e=t.sent(),[2,new Ht(e)]}})})},Ut.prototype.getStations=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Vt.prototype.get.call(this,[this.latlon,"stations"])];case 1:return[2,lt(t.sent())]}})})};var Vt,jt=Ut;function Ut(t){var e=Vt.call(this,"/points")||this;return e.latlon=t,e}e(kt,Gt=r),kt.prototype.get=function(){return u(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,Gt.prototype.get.call(this)];case 1:return e=t.sent(),r={},e.glossary.forEach(function(t){r[t.term]=t.definition}),[2,r]}})})};var Gt,Rt=kt;function kt(){return Gt.call(this,"/glossary")||this}e(Kt,qt=r),Kt.prototype.get=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,qt.prototype.get.call(this)];case 1:return[2,t.sent().icons]}})})};var qt,Yt=Kt;function Kt(){return qt.call(this,"/icons")||this}e(Jt,zt=r),Jt.prototype.get=function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,zt.prototype.get.call(this,[this.officeId])];case 1:return e=t.sent(),[2,new mt(e)]}})})},Jt.prototype.getHeadlines=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,zt.prototype.get.call(this,[this.officeId,"headlines"])];case 1:return[2,t.sent()]}})})};var zt,Xt=Jt;function Jt(t){var e=zt.call(this,"/offices")||this;return e.officeId=t,e}var Bt,P,C,Qt,$t,te,r={Points:jt,points:function(t){return new jt(t)},Glossary:Rt,glossary:function(){return new Rt},Icons:Yt,icons:function(){return new Yt},Products:Q,products:$,Alerts:Nt,alerts:Wt,Offices:Xt,offices:function(t){return new Xt(t)},Stations:st,stations:at,Zones:dt,zones:ft,Point:Ht,GridPoint:xt};function ee(t){var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,n=t.getUTCDate(),i=t.getUTCHours(),t=t.getUTCMinutes();return"".concat(e).concat(r.toString().padStart(2,"0")).concat(n.toString().padStart(2,"0")," ").concat(i.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}function re(t,e){var r,e=(r=e)?Object.keys(r).map(function(t){return t+"="+encodeURIComponent(r[t])}).join("&"):"";return e?"".concat(t,"?").concat(e):t}function ne(t,e){return g(parseFloat(t),e)}(_=Bt=Bt||{}).CRD="CRD",_.IGLD="IGLD",_.LWD="LWD",_.MHHW="MHHW",_.MHW="MHW",_.MTL="MTL",_.MSL="MSL",_.MLW="MLW",_.MLLW="MLLW",_.NAVD="NAVD",_.STND="STND",(_=P=P||{}).water_level="water_level",_.air_temperature="air_temperature",_.water_temperature="water_temperature",_.wind="wind",_.air_pressure="air_pressure",_.air_gap="air_gap",_.conductivity="conductivity",_.visibility="visibility",_.humidity="humidity",_.salinity="salinity",_.hourly_height="hourly_height",_.high_low="high_low",_.daily_mean="daily_mean",_.monthly_mean="monthly_mean",_.one_minute_water_level="one_minute_water_level",_.predictions="predictions",_.datums="datums",_.currents="currents",(_=C=C||{}).metric="metric",_.english="english",(_=Qt=Qt||{}).gmt="gmt",_.lst="lst",_.lst_ldt="lst_ldt",(_=$t=$t||{}).h="h",_.hilo="hilo",(_=te=te||{}).json="json",_.xml="xml",_.csv="csv";Z.prototype.getLatest=function(){return this.params.date="latest",this.get()},Z.prototype.getRecent=function(){return this.params.date="recent",this.get()},Z.prototype.getToday=function(){return this.params.date="today",this.get()},Z.prototype.getLastHours=function(t){return this.params.range=t,this.get()},Z.prototype.getHoursAfter=function(t,e){return this.params.begin_date=ee(t),this.params.range=e,this.get()},Z.prototype.getHoursBefore=function(t,e){return this.params.end_date=ee(t),this.params.range=e,this.get()},Z.prototype.getDateRange=function(t,e){return this.params.begin_date=ee(t),this.params.end_date=ee(e),this.get()},Z.prototype.get=function(){var i=this,o=this;return new Promise(function(e,r){var n=new XMLHttpRequest,t=re(Z.url,i.params);n.open("GET",t),n.onload=function(){var t;200<=n.status&&n.status<300?(t=JSON.parse(n.response)).error?r(t.error):((t=o.parseResponse(t)).parameters=Object.assign({},o.params),e(t)):r(n)},n.onerror=function(){r(n)},n.send()})},Z.prototype.parseResponse=function(t){return t},Z.url="https://api.tidesandcurrents.noaa.gov/api/prod/datagetter";var _=Z;function Z(t,e,r,n,i){if(void 0===r&&(r=void 0),void 0===n&&(n=void 0),void 0===i&&(i="metric"),!(e in P))throw new Error("Invalid data product");if(!(i in C))throw new Error("Invalid units");if(this.params={},this.params.station=t,this.params.product=e,this.params.format=te.json,this.params.units=i,this.params.time_zone=Qt.gmt,r){if(!(r in Bt))throw new Error("Invalid datum value");this.params.datum=r}if(n){if(!(n in $t))throw new Error("Invalid interval");this.params.interval=n}}e(se,ie=_),se.prototype.parseResponse=function(t){var e=[];return t.datums.forEach(function(t){e.push({name:t.n,value:ne(t.v,"m")})}),e};var ie,oe=se;function se(t){return ie.call(this,t,P.datums,void 0,void 0,C.metric)||this}e(ce,ae=_),ce.prototype.parseResponse=function(t){var e=[];return t.predictions.forEach(function(t){e.push({time:o(t.t.replace(" ","T")+":00+00:00"),value:ne(t.v,"m"),type:t.type})}),e};var ae,ue=ce;function ce(t,e){return e=e||Bt.STND,ae.call(this,t,P.predictions,e,$t.hilo,C.metric)||this}e(he,le=_),he.prototype.parseResponse=function(t){return t};var le,pe=he;function he(t,e){return le.call(this,t,P.wind,void 0,e,C.metric)||this}fe.prototype.stations=function(r){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e="stations.json",r&&(e=re(e,{type:r})),[4,this.get(e)];case 1:return[2,t.sent().stations]}})})},fe.prototype.station=function(n){return u(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return e="stations/".concat(n,".json"),[4,this.get(e)];case 1:if(e=t.sent(),(r=e.stations)&&1===r.length)return[2,r[0]];throw new Error("API did not return any data for station id ".concat(n))}})})},fe.prototype.get=function(i){return u(this,void 0,void 0,function(){var e,r,n;return c(this,function(t){switch(t.label){case 0:return n="".concat(fe.baseUrl,"/").concat(i),[4,fetch(n)];case 1:if(!1!==(e=t.sent()).ok)return[3,6];r=null,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e.json()];case 3:return"errorMsg"in(n=t.sent())&&(r=n.errorMsg),[3,5];case 4:return t.sent(),[3,5];case 5:throw new Error(null!=r?r:"API responded with status ".concat(e.status," (").concat(e.statusText,")"));case 6:return[4,e.json()];case 7:return[2,t.sent()]}})})},fe.baseUrl="https://api.tidesandcurrents.noaa.gov/mdapi/prod/webapi";var de,_=fe;function fe(){}(N=de=de||{}).waterlevels="waterlevels",N.historicwl="historicwl",N.met="met",N.waterlevelsandmet="waterlevelsandmet",N.tidepredictions="tidepredictions",N.harcon="harcon",N.datums="datums",N.supersededdatums="supersededdatums",N.benchmarks="benchmarks",N.supersededbenchmarks="supersededbenchmarks",N.currents="currents",N.historiccurrents="historiccurrents",N.surveycurrents="surveycurrents",N.currentpredictions="currentpredictions",N.cond="cond",N.watertemp="watertemp",N.physocean="physocean",N.tcoon="tcoon",N.oneminute="1minute",N.airgap="airgap",N.visibility="visibility",N.highwater="highwater",N.lowwater="lowwater";var N={Format:te,Datum:Bt,DataProduct:P,Units:C,Interval:$t,StationType:de,data:{predictions:function(t,e){return new ue(t,e)},datums:function(t){return new oe(t)},wind:function(t,e){return new pe(t,e)}},metadata:new _};t.MarineAreaCodes=a,t.RegionCodes=U,t.StateAreaCodes=s,t.TidesAndCurrents=N,t.Time=W,t.Weather=r,t.XY=H,t.time=o,t.xy=j});